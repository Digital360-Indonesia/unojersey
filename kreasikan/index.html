<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kreasikan Jersey Custom | UNO JERSEY</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- html2canvas for export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Custom Styles -->
  <link rel="stylesheet" href="./css/styles.css">
</head>
<body class="bg-gray-100 font-['Inter']">
  <div id="app" class="min-h-screen">

    <!-- ============================================ -->
    <!-- STEP 1: MODEL SELECTOR -->
    <!-- ============================================ -->
    <div id="model-selector" class="screen active">
      <div class="max-w-6xl mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-12">
          <a href="/" class="inline-block mb-6">
            <img src="/assets/images/UNO-Black.png" alt="UNO JERSEY" class="h-12 mx-auto">
          </a>
          <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-3">Pilih Tipe Jersey Kamu</h1>
          <p class="text-gray-600 text-lg">Mulai dengan memilih model jersey yang ingin kamu desain</p>
        </header>

        <!-- Model Grid -->
        <div class="model-grid grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 md:gap-6">
          <!-- Basic -->
          <div class="model-card cursor-pointer" data-model="basic">
            <div class="bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition-all hover:-translate-y-1">
              <div class="aspect-square bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex items-center justify-center mb-4">
                <span class="text-6xl">ğŸ‘•</span>
              </div>
              <h3 class="text-xl font-bold text-center text-gray-900">Basic</h3>
              <p class="text-sm text-gray-500 text-center mt-1">Kaos simpel</p>
            </div>
          </div>

          <!-- Basketball -->
          <div class="model-card cursor-pointer" data-model="basketball">
            <div class="bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition-all hover:-translate-y-1">
              <div class="aspect-square bg-gradient-to-br from-orange-100 to-orange-200 rounded-xl flex items-center justify-center mb-4">
                <span class="text-6xl">ğŸ€</span>
              </div>
              <h3 class="text-xl font-bold text-center text-gray-900">Basketball</h3>
              <p class="text-sm text-gray-500 text-center mt-1">Jersey basket</p>
            </div>
          </div>

          <!-- Baseball -->
          <div class="model-card cursor-pointer" data-model="baseball">
            <div class="bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition-all hover:-translate-y-1">
              <div class="aspect-square bg-gradient-to-br from-red-100 to-red-200 rounded-xl flex items-center justify-center mb-4">
                <span class="text-6xl">âš¾</span>
              </div>
              <h3 class="text-xl font-bold text-center text-gray-900">Baseball</h3>
              <p class="text-sm text-gray-500 text-center mt-1">Jersey baseball</p>
            </div>
          </div>

          <!-- Polo -->
          <div class="model-card cursor-pointer" data-model="polo">
            <div class="bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition-all hover:-translate-y-1">
              <div class="aspect-square bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center mb-4">
                <span class="text-6xl">ğŸ‘•</span>
              </div>
              <h3 class="text-xl font-bold text-center text-gray-900">Polo</h3>
              <p class="text-sm text-gray-500 text-center mt-1">Kaos kerah</p>
            </div>
          </div>

          <!-- Set -->
          <div class="model-card cursor-pointer" data-model="set">
            <div class="bg-white rounded-2xl p-6 shadow-md hover:shadow-xl transition-all hover:-translate-y-1">
              <div class="aspect-square bg-gradient-to-br from-green-100 to-green-200 rounded-xl flex items-center justify-center mb-4">
                <span class="text-6xl">ğŸ½</span>
              </div>
              <h3 class="text-xl font-bold text-center text-gray-900">Set</h3>
              <p class="text-sm text-gray-500 text-center mt-1">Training set</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================ -->
    <!-- STEP 2: TEMPLATE VS CUSTOM CHOOSER -->
    <!-- ============================================ -->
    <div id="chooser" class="screen">
      <div class="max-w-5xl mx-auto px-4 py-8">
        <!-- Back Button -->
        <button id="back-to-models" class="mb-6 text-gray-600 hover:text-gray-900 flex items-center gap-2">
          <span>â†</span>
          <span>Kembali</span>
        </button>

        <!-- Header -->
        <header class="text-center mb-12">
          <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-3">Bagaimana Kamu Mau Mulai?</h1>
          <p class="text-gray-600 text-lg">Pilih cara untuk membuat desain jersey-mu</p>
        </header>

        <!-- Choice Grid -->
        <div class="grid md:grid-cols-2 gap-6">
          <!-- Template Card -->
          <div class="choice-card cursor-pointer" data-choice="template">
            <div class="bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all hover:-translate-y-1 h-full">
              <div class="text-center">
                <div class="w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6">
                  <span class="text-4xl">ğŸ“</span>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 mb-2">TEMPLATE</h2>
                <p class="text-gray-600 mb-6">Pilih dari 10+ template siap pakai</p>
              </div>

              <ul class="space-y-2 mb-6">
                <li class="flex items-center gap-2 text-gray-700">
                  <span class="text-green-500">âœ“</span>
                  <span>Tinggal edit nama & nomor</span>
                </li>
                <li class="flex items-center gap-2 text-gray-700">
                  <span class="text-green-500">âœ“</span>
                  <span>Cepat (5 menit)</span>
                </li>
                <li class="flex items-center gap-2 text-gray-700">
                  <span class="text-green-500">âœ“</span>
                  <span>Profesional</span>
                </li>
              </ul>

              <button class="w-full py-3 bg-purple-600 text-white rounded-xl font-semibold hover:bg-purple-700 transition">
                Pilih Template
              </button>
            </div>
          </div>

          <!-- Custom Card -->
          <div class="choice-card cursor-pointer" data-choice="custom">
            <div class="bg-white rounded-2xl p-8 shadow-md hover:shadow-xl transition-all hover:-translate-y-1 h-full">
              <div class="text-center">
                <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
                  <span class="text-4xl">ğŸ¨</span>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 mb-2">CUSTOM</h2>
                <p class="text-gray-600 mb-6">Design dari nol dengan full control</p>
              </div>

              <ul class="space-y-2 mb-6">
                <li class="flex items-center gap-2 text-gray-700">
                  <span class="text-green-500">âœ“</span>
                  <span>Unlimited creativity</span>
                </li>
                <li class="flex items-center gap-2 text-gray-700">
                  <span class="text-green-500">âœ“</span>
                  <span>Unique design</span>
                </li>
                <li class="flex items-center gap-2 text-gray-700">
                  <span class="text-green-500">âœ“</span>
                  <span>Full kontrol</span>
                </li>
              </ul>

              <button class="w-full py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition">
                Mulai Custom
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ============================================ -->
    <!-- STEP 3A: TEMPLATE GALLERY -->
    <!-- ============================================ -->
    <div id="template-gallery" class="screen">
      <div class="max-w-6xl mx-auto px-4 py-8">
        <!-- Back Button -->
        <button id="back-to-chooser" class="mb-6 text-gray-600 hover:text-gray-900 flex items-center gap-2">
          <span>â†</span>
          <span>Kembali</span>
        </button>

        <!-- Header -->
        <header class="mb-8">
          <h1 id="gallery-title" class="text-2xl md:text-3xl font-bold text-gray-900">Template Basketball</h1>
          <p id="gallery-count" class="text-gray-600">15 template tersedia</p>
        </header>

        <!-- Filters -->
        <div class="flex flex-wrap gap-2 mb-8">
          <button class="filter-btn active px-4 py-2 rounded-full bg-gray-900 text-white font-medium" data-filter="all">
            All
          </button>
          <button class="filter-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300" data-filter="retro">
            Retro
          </button>
          <button class="filter-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300" data-filter="bold">
            Bold
          </button>
          <button class="filter-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-gray-300" data-filter="minimal">
            Minimal
          </button>
        </div>

        <!-- Template Grid -->
        <div id="template-list" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
          <!-- Templates will be loaded dynamically -->
        </div>
      </div>
    </div>

    <!-- ============================================ -->
    <!-- TEMPLATE PREVIEW MODAL -->
    <!-- ============================================ -->
    <div id="template-modal" class="modal hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
      <div class="modal-content bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6">
          <!-- Close Button -->
          <button id="close-modal" class="absolute top-4 right-4 w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200">
            Ã—
          </button>

          <!-- Template Name -->
          <h2 id="modal-template-name" class="text-2xl font-bold text-gray-900 mb-4">Lakers Vibe</h2>

          <!-- Preview Image -->
          <div class="aspect-square bg-gray-100 rounded-xl mb-6 flex items-center justify-center">
            <img id="modal-template-preview" src="" alt="Template Preview" class="max-w-full max-h-full object-contain">
          </div>

          <!-- Template Info -->
          <div id="modal-template-info" class="mb-6 p-4 bg-gray-50 rounded-xl">
            <p class="text-gray-700"><strong>Colors:</strong> <span id="template-colors">Purple, Gold, White</span></p>
            <p class="text-gray-700"><strong>Pattern:</strong> <span id="template-pattern">Solid</span></p>
            <p class="text-gray-700"><strong>Style:</strong> <span id="template-style">Retro 90s</span></p>
          </div>

          <!-- Editable List -->
          <div class="mb-6">
            <h3 class="font-semibold text-gray-900 mb-2">Yang bisa kamu edit:</h3>
            <ul class="space-y-1 text-gray-700">
              <li class="flex items-center gap-2">
                <span class="text-green-500">âœ“</span>
                <span>Nama tim</span>
              </li>
              <li class="flex items-center gap-2">
                <span class="text-green-500">âœ“</span>
                <span>Nomor punggung</span>
              </li>
              <li class="flex items-center gap-2">
                <span class="text-green-500">âœ“</span>
                <span>Nama pemain</span>
              </li>
              <li class="flex items-center gap-2">
                <span class="text-green-500">âœ“</span>
                <span>Logo (tambah/ganti)</span>
              </li>
            </ul>
          </div>

          <!-- Action Button -->
          <button id="use-template-btn" class="w-full py-4 bg-purple-600 text-white rounded-xl font-semibold hover:bg-purple-700 transition text-lg">
            Pakai Template Ini
          </button>
        </div>
      </div>
    </div>

    <!-- ============================================ -->
    <!-- STEP 4: DESIGN EDITOR (SIMPLIFIED) -->
    <!-- ============================================ -->
    <div id="editor" class="screen">
      <!-- Header -->
      <header class="editor-header bg-white border-b sticky top-0 z-40 px-4 py-3">
        <div class="flex items-center justify-between">
          <button id="editor-back-btn" class="text-gray-600 hover:text-gray-900 flex items-center gap-2">
            <span>â†</span>
            <span class="hidden sm:inline">Back</span>
          </button>

          <span id="project-name" class="font-semibold text-gray-900 truncate">Basketball | Custom Design</span>

          <div class="flex items-center gap-2">
            <button id="export-btn" class="px-3 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">
              ğŸ“¤ Export
            </button>
          </div>
        </div>
      </header>

      <div class="editor-layout flex flex-col lg:flex-row">
        <!-- Left: Jersey Preview -->
        <main class="canvas-area flex-1 bg-gray-100 p-4 flex flex-col items-center justify-center">
          <!-- Jersey Preview Container -->
          <div class="jersey-preview-container" id="jersey-preview-container">
            <!-- Background: Jersey template image -->
            <img id="jersey-base"
                 src="./assets/templates/default-jersey.svg"
                 class="jersey-base-image"
                 alt="Jersey Base">

            <!-- Text Overlays (positioned absolute) -->
            <div id="text-team-name"
                 class="text-overlay"
                 style="top: 120px; left: 50%; transform: translateX(-50%);">
              TEAM
            </div>

            <div id="text-player-number"
                 class="text-overlay number"
                 style="top: 350px; left: 50%; transform: translateX(-50%);">
              1
            </div>

            <div id="text-player-name"
                 class="text-overlay"
                 style="top: 520px; left: 50%; transform: translateX(-50%);">
              PLAYER
            </div>

            <!-- Logo Overlay -->
            <img id="logo-overlay"
                 src=""
                 class="logo-overlay hidden"
                 style="top: 60px; left: 50%; transform: translateX(-50%); width: 60px; height: 60px;"
                 alt="Logo">
          </div>

          <!-- Instruction -->
          <p class="text-gray-500 text-sm mt-4 text-center">
            Edit text di panel kanan â†’ jersey update otomatis
          </p>
        </main>

        <!-- Right Panel: Edit Panel -->
        <aside class="right-panel w-full lg:w-80 bg-white border-l overflow-y-auto">
          <div class="p-6 space-y-6">
            <div>
              <h3 class="font-bold text-gray-900 text-lg mb-1">EDIT JERSEY</h3>
              <p class="text-gray-500 text-sm">Ubah text di bawah, jersey akan update otomatis</p>
            </div>

            <!-- Team Name -->
            <div class="edit-section">
              <label for="input-team-name" class="block text-sm font-medium text-gray-700 mb-2">
                Nama Tim:
              </label>
              <input type="text"
                     id="input-team-name"
                     value="TEAM"
                     maxlength="15"
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                     placeholder="Contoh: LAKERS">
              <small class="text-gray-500">Maksimal 15 karakter</small>
            </div>

            <!-- Player Number -->
            <div class="edit-section">
              <label for="input-player-number" class="block text-sm font-medium text-gray-700 mb-2">
                Nomor Punggung:
              </label>
              <input type="text"
                     id="input-player-number"
                     value="1"
                     maxlength="3"
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                     placeholder="Contoh: 23">
              <small class="text-gray-500">Maksimal 3 digit</small>
            </div>

            <!-- Player Name -->
            <div class="edit-section">
              <label for="input-player-name" class="block text-sm font-medium text-gray-700 mb-2">
                Nama Pemain:
              </label>
              <input type="text"
                     id="input-player-name"
                     value="PLAYER"
                     maxlength="20"
                     class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                     placeholder="Contoh: JORDAN">
              <small class="text-gray-500">Maksimal 20 karakter</small>
            </div>

            <hr class="border-gray-200">

            <!-- Logo Upload -->
            <div class="edit-section">
              <label class="block text-sm font-medium text-gray-700 mb-2">
                Logo Tim:
              </label>
              <div class="logo-upload-area">
                <input type="file"
                       id="input-logo"
                       accept="image/*"
                       style="display: none;">
                <button id="btn-upload-logo" class="w-full py-3 px-4 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition flex items-center justify-center gap-2">
                  ğŸ“ Upload Logo
                </button>
                <button id="btn-remove-logo" class="w-full py-3 px-4 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition flex items-center justify-center gap-2 hidden mt-2">
                  ğŸ—‘ï¸ Hapus Logo
                </button>
              </div>
              <small class="text-gray-500">PNG/JPG, max 2MB</small>
            </div>

            <hr class="border-gray-200">

            <!-- Price Estimate -->
            <div class="price-estimate p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl">
              <h4 class="font-bold text-gray-900 mb-1">ğŸ’° Estimasi Harga</h4>
              <p class="text-2xl font-bold text-purple-600">Rp 175.000</p>
              <p class="text-sm text-gray-600">/ pcs</p>
              <small class="text-gray-500">Harga final tergantung qty</small>
            </div>
          </div>
        </aside>
      </div>

      <!-- Bottom Action Bar (Mobile) -->
      <footer class="bottom-bar lg:hidden bg-white border-t p-4">
        <button id="mobile-export-btn" class="w-full py-3 bg-purple-600 text-white rounded-xl font-semibold">
          ğŸ“¤ Export Desain
        </button>
      </footer>
    </div>

    <!-- ============================================ -->
    <!-- STEP 5: EXPORT SCREEN -->
    <!-- ============================================ -->
    <div id="export-screen" class="screen">
      <div class="max-w-2xl mx-auto px-4 py-8">
        <!-- Back Button -->
        <button id="back-to-editor" class="mb-6 text-gray-600 hover:text-gray-900 flex items-center gap-2">
          <span>â†</span>
          <span>Kembali ke Editor</span>
        </button>

        <!-- Header -->
        <header class="text-center mb-8">
          <h1 class="text-3xl font-bold text-gray-900 mb-2">Design Kamu Sudah Siap! ğŸ‰</h1>
          <p class="text-gray-600">Simpan atau kirim desainmu untuk memesan jersey</p>
        </header>

        <!-- Preview -->
        <div class="preview-container bg-white rounded-2xl shadow-lg p-4 mb-6">
          <img id="final-preview" src="" alt="Jersey Preview" class="w-full rounded-xl">
        </div>

        <!-- Export Actions -->
        <div class="export-actions space-y-3">
          <button id="send-to-own-wa" class="w-full py-4 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition flex items-center justify-center gap-2">
            <span>ğŸ“±</span>
            <span>Kirim ke WhatsApp Saya</span>
          </button>

          <button id="send-to-uno-wa" class="w-full py-4 bg-purple-600 text-white rounded-xl font-semibold hover:bg-purple-700 transition flex items-center justify-center gap-2">
            <span>ğŸ’¬</span>
            <div class="text-left">
              <span>Tanya Harga / Pesan</span>
              <small class="block text-xs opacity-80">Chat dengan UNO JERSEY</small>
            </div>
          </button>

          <button id="download-design" class="w-full py-4 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition flex items-center justify-center gap-2">
            <span>ğŸ“¥</span>
            <span>Download Desain (PNG)</span>
          </button>
        </div>

        <!-- Info -->
        <div class="mt-6 p-4 bg-blue-50 rounded-xl text-sm text-blue-800">
          <p><strong>Catatan:</strong> Gambar desain akan didownload otomatis. Silakan kirim file tersebut ke WhatsApp untuk diproses.</p>
        </div>
      </div>
    </div>

  </div>

  <!-- Loading Overlay (hidden by default) -->
  <div id="loading-overlay" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center">
    <div class="bg-white rounded-2xl p-8 text-center">
      <div class="spinner mx-auto mb-4"></div>
      <p class="text-gray-700" id="loading-text">Memproses...</p>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="./js/templates.js"></script>
  <script src="./js/simplified-editor.js"></script>
  <script src="./js/export.js"></script>
  <script src="./js/app.js"></script>
</body>
</html>
